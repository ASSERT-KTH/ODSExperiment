{
  "files": [
    {
      "features": [
        {
          "FEATURES_METHOD_INVOCATION": {},
          "FEATURES_TYPEACCESS": {},
          "FEATURES_VARS": {},
          "S10_METHOD_CALL_WITH_NULL_GUARD": "false",
          "S11_FAULTY_CLASS_EXCEPTION_TYPE": "false",
          "S12_METHOD_CALL_WITH_TRY_CATCH": "false",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_1": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_2": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_3": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_1": "Invocation",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_2": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_3": "",
          "S14_TYPE_OF_FAULTY_STATEMENT_PARENT": "Constructor",
          "S15_HAS_OBJECTIVE_METHOD_CALL": "false",
          "S16_HAS_Invocations_Prone_Exception": "false",
          "S18_In_Synchronized_Method": "false",
          "S1_LOCAL_VAR_NOT_ASSIGNED": "false",
          "S1_LOCAL_VAR_NOT_USED": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NORMAL_GUARD": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NULL_GUARD": "false",
          "S3_TYPE_OF_FAULTY_STATEMENT": "Assignment",
          "S4_Field_NOT_ASSIGNED": "false",
          "S4_Field_NOT_USED": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NORMAL_GUARD": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NULL_GUARD": "false",
          "S6_METHOD_THROWS_EXCEPTION": "false",
          "S7_OBJECT_USED_IN_ASSIGNMENT": "false",
          "S8_PRIMITIVE_USED_IN_ASSIGNMENT": "false",
          "S9_METHOD_CALL_WITH_NORMAL_GUARD": "false",
          "ast_info": {
            "dst": "null",
            "dst_parent": "null",
            "dst_parent_type": "null",
            "dst_type": "null",
            "operator": "DEL",
            "src": "fileNameModel",
            "src_parent": "this.fileNameModel = fileNameModel",
            "src_parent_type": "Assignment",
            "src_type": "VariableRead"
          }
        },
        {
          "FEATURES_METHOD_INVOCATION": {},
          "FEATURES_TYPEACCESS": {},
          "FEATURES_VARS": {},
          "S10_METHOD_CALL_WITH_NULL_GUARD": "false",
          "S12_METHOD_CALL_WITH_TRY_CATCH": "false",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_1": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_2": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_3": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_1": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_2": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_3": "",
          "S14_TYPE_OF_FAULTY_STATEMENT_PARENT": "Package",
          "S15_HAS_OBJECTIVE_METHOD_CALL": "true",
          "S16_HAS_Invocations_Prone_Exception": "true",
          "S18_In_Synchronized_Method": "false",
          "S1_LOCAL_VAR_NOT_ASSIGNED": "false",
          "S1_LOCAL_VAR_NOT_USED": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NORMAL_GUARD": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NULL_GUARD": "false",
          "S3_TYPE_OF_FAULTY_STATEMENT": "Class",
          "S4_Field_NOT_ASSIGNED": "false",
          "S4_Field_NOT_USED": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NORMAL_GUARD": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NULL_GUARD": "false",
          "S7_OBJECT_USED_IN_ASSIGNMENT": "false",
          "S8_PRIMITIVE_USED_IN_ASSIGNMENT": "false",
          "S9_METHOD_CALL_WITH_NORMAL_GUARD": "false",
          "ast_info": {
            "dst": "null",
            "dst_parent": "null",
            "dst_parent_type": "null",
            "dst_type": "null",
            "operator": "INS",
            "src": "@java.lang.Override\npublic void detachModels() {\n    super.detachModels();\n    if (fileNameModel != null) {\n        fileNameModel.detach();\n    }\n}",
            "src_parent": "public class DownloadLink extends org.apache.wicket.markup.html.link.Link<java.io.File> {\n    private static final long serialVersionUID = 1L;\n\n    private org.apache.wicket.model.IModel<java.lang.String> fileNameModel;\n\n    private boolean deleteAfter;\n\n    private org.apache.wicket.util.time.Duration cacheDuration;\n\n    public DownloadLink(java.lang.String id, java.io.File file) {\n        this(id, new org.apache.wicket.model.Model<java.io.File>(org.apache.wicket.util.lang.Args.notNull(file, \"file\")));\n    }\n\n    public DownloadLink(java.lang.String id, org.apache.wicket.model.IModel<java.io.File> model) {\n        this(id, model, ((org.apache.wicket.model.IModel<java.lang.String>) (null)));\n    }\n\n    public DownloadLink(java.lang.String id, org.apache.wicket.model.IModel<java.io.File> model, java.lang.String fileName) {\n        this(id, model, org.apache.wicket.model.Model.of(fileName));\n    }\n\n    public DownloadLink(java.lang.String id, java.io.File file, java.lang.String fileName) {\n        this(id, org.apache.wicket.model.Model.of(org.apache.wicket.util.lang.Args.notNull(file, \"file\")), org.apache.wicket.model.Model.of(fileName));\n    }\n\n    public DownloadLink(java.lang.String id, org.apache.wicket.model.IModel<java.io.File> fileModel, org.apache.wicket.model.IModel<java.lang.String> fileNameModel) {\n        super(id, fileModel);\n        this.fileNameModel = wrap(fileNameModel);\n    }\n\n    @java.lang.Override\n    public void detachModels() {\n        super.detachModels();\n        if (fileNameModel != null) {\n            fileNameModel.detach();\n        }\n    }\n\n    @java.lang.Override\n    public void onClick() {\n        final java.io.File file = getModelObject();\n        if (file == null) {\n            throw new java.lang.IllegalStateException(getClass().getName() + \" failed to retrieve a File object from model\");\n        }\n        java.lang.String fileName = (fileNameModel != null) ? fileNameModel.getObject() : null;\n        if (org.apache.wicket.util.string.Strings.isEmpty(fileName)) {\n            fileName = file.getName();\n        }\n        fileName = UrlEncoder.QUERY_INSTANCE.encode(fileName, getRequest().getCharset());\n        org.apache.wicket.util.resource.IResourceStream resourceStream = new org.apache.wicket.util.resource.FileResourceStream(new org.apache.wicket.util.file.File(file));\n        getRequestCycle().scheduleRequestHandlerAfterCurrent(new org.apache.wicket.request.handler.resource.ResourceStreamRequestHandler(resourceStream) {\n            @java.lang.Override\n            public void respond(org.apache.wicket.request.IRequestCycle requestCycle) {\n                super.respond(requestCycle);\n                if (deleteAfter) {\n                    org.apache.wicket.util.file.Files.remove(file);\n                }\n            }\n        }.setFileName(fileName).setContentDisposition(ContentDisposition.ATTACHMENT).setCacheDuration(cacheDuration));\n    }\n\n    public final org.apache.wicket.markup.html.link.DownloadLink setDeleteAfterDownload(boolean deleteAfter) {\n        this.deleteAfter = deleteAfter;\n        return this;\n    }\n\n    public org.apache.wicket.markup.html.link.DownloadLink setCacheDuration(final org.apache.wicket.util.time.Duration duration) {\n        cacheDuration = duration;\n        return this;\n    }\n}",
            "src_parent_type": "Class",
            "src_type": "Method"
          }
        },
        {
          "FEATURES_METHOD_INVOCATION": {},
          "FEATURES_TYPEACCESS": {},
          "FEATURES_VARS": {},
          "S10_METHOD_CALL_WITH_NULL_GUARD": "false",
          "S11_FAULTY_CLASS_EXCEPTION_TYPE": "false",
          "S12_METHOD_CALL_WITH_TRY_CATCH": "false",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_1": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_2": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_3": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_1": "Invocation",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_2": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_3": "",
          "S14_TYPE_OF_FAULTY_STATEMENT_PARENT": "Constructor",
          "S15_HAS_OBJECTIVE_METHOD_CALL": "false",
          "S16_HAS_Invocations_Prone_Exception": "false",
          "S18_In_Synchronized_Method": "false",
          "S1_LOCAL_VAR_NOT_ASSIGNED": "false",
          "S1_LOCAL_VAR_NOT_USED": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NORMAL_GUARD": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NULL_GUARD": "false",
          "S3_TYPE_OF_FAULTY_STATEMENT": "Assignment",
          "S4_Field_NOT_ASSIGNED": "false",
          "S4_Field_NOT_USED": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NORMAL_GUARD": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NULL_GUARD": "false",
          "S6_METHOD_THROWS_EXCEPTION": "false",
          "S7_OBJECT_USED_IN_ASSIGNMENT": "false",
          "S8_PRIMITIVE_USED_IN_ASSIGNMENT": "false",
          "S9_METHOD_CALL_WITH_NORMAL_GUARD": "false",
          "ast_info": {
            "dst": "null",
            "dst_parent": "null",
            "dst_parent_type": "null",
            "dst_type": "null",
            "operator": "INS",
            "src": "wrap(fileNameModel)",
            "src_parent": "this.fileNameModel = wrap(fileNameModel)",
            "src_parent_type": "Assignment",
            "src_type": "Invocation"
          }
        }
      ],
      "file_name": "DownloadLink"
    }
  ],
  "id": "wicket_a7ce7f91"
}