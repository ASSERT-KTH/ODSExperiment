{
  "files": [
    {
      "features": [
        {
          "FEATURES_METHOD_INVOCATION": {},
          "FEATURES_TYPEACCESS": {},
          "FEATURES_VARS": {},
          "S10_METHOD_CALL_WITH_NULL_GUARD": "false",
          "S11_FAULTY_CLASS_EXCEPTION_TYPE": "false",
          "S12_METHOD_CALL_WITH_TRY_CATCH": "false",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_1": "Assignment",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_2": "LocalVariable",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_3": "Assignment",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_1": "LocalVariable",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_2": "LocalVariable",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_3": "LocalVariable",
          "S14_TYPE_OF_FAULTY_STATEMENT_PARENT": "Constructor",
          "S15_HAS_OBJECTIVE_METHOD_CALL": "false",
          "S16_HAS_Invocations_Prone_Exception": "false",
          "S18_In_Synchronized_Method": "false",
          "S1_LOCAL_VAR_NOT_ASSIGNED": "false",
          "S1_LOCAL_VAR_NOT_USED": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NORMAL_GUARD": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NULL_GUARD": "false",
          "S3_TYPE_OF_FAULTY_STATEMENT": "If",
          "S4_Field_NOT_ASSIGNED": "false",
          "S4_Field_NOT_USED": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NORMAL_GUARD": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NULL_GUARD": "false",
          "S6_METHOD_THROWS_EXCEPTION": "false",
          "S7_OBJECT_USED_IN_ASSIGNMENT": "false",
          "S8_PRIMITIVE_USED_IN_ASSIGNMENT": "false",
          "S9_METHOD_CALL_WITH_NORMAL_GUARD": "false",
          "ast_info": {
            "dst": "c == 0",
            "dst_parent": "if (c == 0) {\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D v3 = org.apache.commons.math.geometry.euclidean.threed.Vector3D.crossProduct(v1, v2);\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D v3Su3 = v3.subtract(u3);\n    k = v1Su1.crossProduct(v3Su3);\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D u2Prime = u1.crossProduct(u3);\n    c = k.dotProduct(u2Prime);\n    if (c == 0) {\n        k = v2Su2.crossProduct(v3Su3);\n        c = k.dotProduct(u2.crossProduct(u3));\n        if (c == 0) {\n            q0 = 1.0;\n            q1 = 0.0;\n            q2 = 0.0;\n            q3 = 0.0;\n            return;\n        }\n        uRef = u2;\n        vRef = v2;\n    }\n}",
            "dst_parent_type": "If",
            "dst_type": "BinaryOperator",
            "operator": "UPD",
            "src": "c <= ((inPlaneThreshold * k.getNorm()) * u3.getNorm())",
            "src_parent": "if (c <= ((inPlaneThreshold * k.getNorm()) * u3.getNorm())) {\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D v3 = org.apache.commons.math.geometry.euclidean.threed.Vector3D.crossProduct(v1, v2);\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D v3Su3 = v3.subtract(u3);\n    k = v1Su1.crossProduct(v3Su3);\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D u2Prime = u1.crossProduct(u3);\n    c = k.dotProduct(u2Prime);\n    if (c <= ((inPlaneThreshold * k.getNorm()) * u2Prime.getNorm())) {\n        k = v2Su2.crossProduct(v3Su3);\n        c = k.dotProduct(u2.crossProduct(u3));\n        if (c <= 0) {\n            q0 = 1.0;\n            q1 = 0.0;\n            q2 = 0.0;\n            q3 = 0.0;\n            return;\n        }\n        uRef = u2;\n        vRef = v2;\n    }\n}",
            "src_parent_type": "If",
            "src_type": "BinaryOperator"
          }
        },
        {
          "FEATURES_METHOD_INVOCATION": {},
          "FEATURES_TYPEACCESS": {},
          "FEATURES_VARS": {},
          "S10_METHOD_CALL_WITH_NULL_GUARD": "false",
          "S11_FAULTY_CLASS_EXCEPTION_TYPE": "false",
          "S12_METHOD_CALL_WITH_TRY_CATCH": "false",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_1": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_2": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_3": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_1": "Assignment",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_2": "LocalVariable",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_3": "Assignment",
          "S14_TYPE_OF_FAULTY_STATEMENT_PARENT": "If",
          "S15_HAS_OBJECTIVE_METHOD_CALL": "false",
          "S16_HAS_Invocations_Prone_Exception": "false",
          "S18_In_Synchronized_Method": "false",
          "S1_LOCAL_VAR_NOT_ASSIGNED": "false",
          "S1_LOCAL_VAR_NOT_USED": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NORMAL_GUARD": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NULL_GUARD": "false",
          "S3_TYPE_OF_FAULTY_STATEMENT": "If",
          "S4_Field_NOT_ASSIGNED": "false",
          "S4_Field_NOT_USED": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NORMAL_GUARD": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NULL_GUARD": "false",
          "S6_METHOD_THROWS_EXCEPTION": "false",
          "S7_OBJECT_USED_IN_ASSIGNMENT": "false",
          "S8_PRIMITIVE_USED_IN_ASSIGNMENT": "false",
          "S9_METHOD_CALL_WITH_NORMAL_GUARD": "false",
          "ast_info": {
            "dst": "c == 0",
            "dst_parent": "if (c == 0) {\n    k = v2Su2.crossProduct(v3Su3);\n    c = k.dotProduct(u2.crossProduct(u3));\n    if (c == 0) {\n        q0 = 1.0;\n        q1 = 0.0;\n        q2 = 0.0;\n        q3 = 0.0;\n        return;\n    }\n    uRef = u2;\n    vRef = v2;\n}",
            "dst_parent_type": "If",
            "dst_type": "BinaryOperator",
            "operator": "UPD",
            "src": "c <= ((inPlaneThreshold * k.getNorm()) * u2Prime.getNorm())",
            "src_parent": "if (c <= ((inPlaneThreshold * k.getNorm()) * u2Prime.getNorm())) {\n    k = v2Su2.crossProduct(v3Su3);\n    c = k.dotProduct(u2.crossProduct(u3));\n    if (c <= 0) {\n        q0 = 1.0;\n        q1 = 0.0;\n        q2 = 0.0;\n        q3 = 0.0;\n        return;\n    }\n    uRef = u2;\n    vRef = v2;\n}",
            "src_parent_type": "If",
            "src_type": "BinaryOperator"
          }
        },
        {
          "FEATURES_METHOD_INVOCATION": {},
          "FEATURES_TYPEACCESS": {},
          "FEATURES_VARS": {},
          "S10_METHOD_CALL_WITH_NULL_GUARD": "false",
          "S11_FAULTY_CLASS_EXCEPTION_TYPE": "false",
          "S12_METHOD_CALL_WITH_TRY_CATCH": "false",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_1": "Assignment",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_2": "Assignment",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_3": "",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_1": "Assignment",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_2": "Assignment",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_3": "",
          "S14_TYPE_OF_FAULTY_STATEMENT_PARENT": "If",
          "S15_HAS_OBJECTIVE_METHOD_CALL": "false",
          "S16_HAS_Invocations_Prone_Exception": "false",
          "S18_In_Synchronized_Method": "false",
          "S1_LOCAL_VAR_NOT_ASSIGNED": "false",
          "S1_LOCAL_VAR_NOT_USED": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NORMAL_GUARD": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NULL_GUARD": "false",
          "S3_TYPE_OF_FAULTY_STATEMENT": "If",
          "S4_Field_NOT_ASSIGNED": "false",
          "S4_Field_NOT_USED": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NORMAL_GUARD": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NULL_GUARD": "false",
          "S6_METHOD_THROWS_EXCEPTION": "false",
          "S7_OBJECT_USED_IN_ASSIGNMENT": "false",
          "S8_PRIMITIVE_USED_IN_ASSIGNMENT": "false",
          "S9_METHOD_CALL_WITH_NORMAL_GUARD": "false",
          "ast_info": {
            "dst": "c == 0",
            "dst_parent": "if (c == 0) {\n    q0 = 1.0;\n    q1 = 0.0;\n    q2 = 0.0;\n    q3 = 0.0;\n    return;\n}",
            "dst_parent_type": "If",
            "dst_type": "BinaryOperator",
            "operator": "UPD",
            "src": "c <= 0",
            "src_parent": "if (c <= 0) {\n    q0 = 1.0;\n    q1 = 0.0;\n    q2 = 0.0;\n    q3 = 0.0;\n    return;\n}",
            "src_parent_type": "If",
            "src_type": "BinaryOperator"
          }
        },
        {
          "FEATURES_METHOD_INVOCATION": {},
          "FEATURES_TYPEACCESS": {},
          "FEATURES_VARS": {},
          "S10_METHOD_CALL_WITH_NULL_GUARD": "false",
          "S11_FAULTY_CLASS_EXCEPTION_TYPE": "false",
          "S12_METHOD_CALL_WITH_TRY_CATCH": "false",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_1": "If",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_2": "Assignment",
          "S13_TYPE_OF_FAULTY_STATEMENT_AFTER_3": "LocalVariable",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_1": "LocalVariable",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_2": "LocalVariable",
          "S13_TYPE_OF_FAULTY_STATEMENT_BEFORE_3": "LocalVariable",
          "S14_TYPE_OF_FAULTY_STATEMENT_PARENT": "Constructor",
          "S15_HAS_OBJECTIVE_METHOD_CALL": "false",
          "S16_HAS_Invocations_Prone_Exception": "false",
          "S18_In_Synchronized_Method": "false",
          "S1_LOCAL_VAR_NOT_ASSIGNED": "false",
          "S1_LOCAL_VAR_NOT_USED": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NORMAL_GUARD": "false",
          "S2_SIMILAR_OBJECT_TYPE_WITH_NULL_GUARD": "false",
          "S3_TYPE_OF_FAULTY_STATEMENT": "LocalVariable",
          "S4_Field_NOT_ASSIGNED": "false",
          "S4_Field_NOT_USED": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NORMAL_GUARD": "false",
          "S5_SIMILAR_PRIMITIVE_TYPE_WITH_NULL_GUARD": "false",
          "S6_METHOD_THROWS_EXCEPTION": "false",
          "S7_OBJECT_USED_IN_ASSIGNMENT": "false",
          "S8_PRIMITIVE_USED_IN_ASSIGNMENT": "false",
          "S9_METHOD_CALL_WITH_NORMAL_GUARD": "false",
          "ast_info": {
            "dst": "null",
            "dst_parent": "null",
            "dst_parent_type": "null",
            "dst_type": "null",
            "operator": "DEL",
            "src": "final double inPlaneThreshold = 0.001",
            "src_parent": "{\n    double u1u1 = u1.getNormSq();\n    double u2u2 = u2.getNormSq();\n    double v1v1 = v1.getNormSq();\n    double v2v2 = v2.getNormSq();\n    if ((((u1u1 == 0) || (u2u2 == 0)) || (v1v1 == 0)) || (v2v2 == 0)) {\n        throw org.apache.commons.math.MathRuntimeException.createIllegalArgumentException(LocalizedFormats.ZERO_NORM_FOR_ROTATION_DEFINING_VECTOR);\n    }\n    v1 = new org.apache.commons.math.geometry.euclidean.threed.Vector3D(org.apache.commons.math.util.FastMath.sqrt(u1u1 / v1v1), v1);\n    double u1u2 = u1.dotProduct(u2);\n    double v1v2 = v1.dotProduct(v2);\n    double coeffU = u1u2 / u1u1;\n    double coeffV = v1v2 / u1u1;\n    double beta = org.apache.commons.math.util.FastMath.sqrt((u2u2 - (u1u2 * coeffU)) / (v2v2 - (v1v2 * coeffV)));\n    double alpha = coeffU - (beta * coeffV);\n    v2 = new org.apache.commons.math.geometry.euclidean.threed.Vector3D(alpha, v1, beta, v2);\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D uRef = u1;\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D vRef = v1;\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D v1Su1 = v1.subtract(u1);\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D v2Su2 = v2.subtract(u2);\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D k = v1Su1.crossProduct(v2Su2);\n    org.apache.commons.math.geometry.euclidean.threed.Vector3D u3 = u1.crossProduct(u2);\n    double c = k.dotProduct(u3);\n    final double inPlaneThreshold = 0.001;\n    if (c <= ((inPlaneThreshold * k.getNorm()) * u3.getNorm())) {\n        org.apache.commons.math.geometry.euclidean.threed.Vector3D v3 = org.apache.commons.math.geometry.euclidean.threed.Vector3D.crossProduct(v1, v2);\n        org.apache.commons.math.geometry.euclidean.threed.Vector3D v3Su3 = v3.subtract(u3);\n        k = v1Su1.crossProduct(v3Su3);\n        org.apache.commons.math.geometry.euclidean.threed.Vector3D u2Prime = u1.crossProduct(u3);\n        c = k.dotProduct(u2Prime);\n        if (c <= ((inPlaneThreshold * k.getNorm()) * u2Prime.getNorm())) {\n            k = v2Su2.crossProduct(v3Su3);\n            c = k.dotProduct(u2.crossProduct(u3));\n            if (c <= 0) {\n                q0 = 1.0;\n                q1 = 0.0;\n                q2 = 0.0;\n                q3 = 0.0;\n                return;\n            }\n            uRef = u2;\n            vRef = v2;\n        }\n    }\n    c = org.apache.commons.math.util.FastMath.sqrt(c);\n    double inv = 1.0 / (c + c);\n    q1 = inv * k.getX();\n    q2 = inv * k.getY();\n    q3 = inv * k.getZ();\n    k = new org.apache.commons.math.geometry.euclidean.threed.Vector3D((uRef.getY() * q3) - (uRef.getZ() * q2), (uRef.getZ() * q1) - (uRef.getX() * q3), (uRef.getX() * q2) - (uRef.getY() * q1));\n    q0 = vRef.dotProduct(k) / (2 * k.getNormSq());\n}",
            "src_parent_type": "Block",
            "src_type": "LocalVariable"
          }
        }
      ],
      "file_name": "Rotation"
    }
  ],
  "id": "Math_52"
}